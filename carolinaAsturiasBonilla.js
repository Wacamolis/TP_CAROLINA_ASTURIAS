// INTRODUCCION A JAVASCRIPT
// COMISION 202504
// ---------------------------------------------
// 
// Proyecto Final - Sistema de Gesti√≥n de Biblioteca
// Por Carolina Asturias Bonilla
// 
// ---------------------------------------------

const prompt = require("prompt-sync")({ sigint: true }); // se llama al prompt al inicio. 

// ---------------------------------------------
// PUNTO 1: ESTRUCTURA DE DATOS 
// ---------------------------------------------

// a) Array de libros
// El array de libros esta formado por los libros, cada libro es un objeto con propiedades especificas

let libros = [
  {
    id: 1001,
    titulo: "El se√±or de los anillos",
    autor: "J.R.R. Tolkien",
    anio: 1954,
    genero: "fantas√≠a",
    disponible: true
  },
  {
    id: 1002,
    titulo: "Harry Potter y la piedra filosofal",
    autor: "J.K. Rowling",
    anio: 1997,
    genero: "fantas√≠a",
    disponible: true
  },
  {
    id: 1003,
    titulo: "Crimen y castigo",
    autor: "Fi√≥dor Dostoievski",
    anio: 1866,
    genero: "psicol√≥gico",
    disponible: true
  },
  {
    id: 1004,
    titulo: "G3",
    autor: "Francisco Javier Torres Sim√≥n",
    anio: 2017,
    genero: "ciencia ficci√≥n",
    disponible: true
  },
  {
    id: 1005,
    titulo: "Los Fantasmas del Nuevo Mundo",
    autor: "David Aramburo",
    anio: 2014,
    genero: "ciencia ficci√≥n",
    disponible: true
  },
  {
    id: 1006,
    titulo: "Bajo la Misma Estrella",
    autor: "John Green",
    anio: 2012,
    genero: "romance",
    disponible: true
  },
  {
    id: 1007,
    titulo: "Como Agua para Chocolate",
    autor: "Laura Esquivel",
    anio: 1989,
    genero: "romance",
    disponible: true
  },
  {
    id: 1008,
    titulo: "El resplandor",
    autor: "Stephen King",
    anio: 1977,
    genero: "terror",
    disponible: true
  },
  {
    id: 1009,
    titulo: "El coleccionista de huesos",
    autor: "Jeffery Deaver",
    anio: 1997,
    genero: "terror",
    disponible: true
  },
  {
    id: 1010,
    titulo: "La Isla del Tesoro",
    autor: "Robert Louis Stevenson",
    anio: 1883,
    genero: "aventura",
    disponible: true
  }
];

// b) Array de usuarios
// El array de usuarios esta formado por los usuarios, cada usuario es un objeto con propiedades especificas

let usuarios = [
  {
    id: 2001,
    nombre: "Julia M.",
    email: "julia@correo.com",
    librosPrestados: []
  },
  {
    id: 2002,
    nombre: "Lucia P.",
    email: "lucia@correo.com",
    librosPrestados: []
  },
  {
    id: 2003,
    nombre: "Marielos G.",
    email: "marielos@correo.com",
    librosPrestados: []
  },
  {
    id: 2004,
    nombre: "Karen L.",
    email: "karen@correo.com",
    librosPrestados: []
  },
  {
    id: 2005,
    nombre: "Robin C.",
    email: "robin@correo.com",
    librosPrestados: []
  }
];

// ---------------------------------------------
// FUNCIONES EXTRA 
// ---------------------------------------------

// Funci√≥n mostrarLibroLinea() PUNTO 8
// Muestra la informaci√≥n de un libro en una sola l√≠nea, con un formato m√°s ordenado y visual.
// Recibe un objeto 'libro' con sus propiedades, transforma el titulo a mayusculas con .toUpperCase  PUNTO 8
// Visualmente se ve asi: 1. üìò [ID: 1001] "EL SE√ëOR DE LOS ANILLOS" - J.R.R. Tolkien - (1954) - fantas√≠a - ‚úÖ Disponible

function mostrarLibroLinea(libro, index = null) { 
  const numero = index !== null ? `${index + 1}. ` : ""; 
  console.log(
    `${numero}üìò [ID: ${libro.id}] "${libro.titulo.toUpperCase()}" - ${libro.autor} - (${libro.anio}) - ${libro.genero} - ${libro.disponible ? "‚úÖ Disponible" : "‚ùå Prestado"}`
  );
}

// Funci√≥n mostrarLibros()
// Muestra el listado completo de libros de la biblioteca
// - Recorre el array 'libros' con .forEach(). Por cada libro, llama a la funci√≥n mostrarLibroLinea()

function mostrarLibros() { 
  console.log("\n ‚ú®üìö Listado de libros ‚ú®\n");
  libros.forEach((libro, index) => {
    mostrarLibroLinea(libro, index);
  });
}

// Funci√≥n quitarAcentos() PUNTO 8
// Normaliza el texto eliminando cualquier acento
// Usa normalize("NFD") para separar los caracteres con acentos de sus tildes.
// Luego usa .replace() para quitar signos.

function quitarAcentos(texto) {  // funcion para quitar acentos
  return texto.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
}

// ---------------------------------------------
// PUNTO 2: FUNCIONES DE GESTI√ìN DE LIBROS
// ---------------------------------------------

// a) Agregar libro nuevo al sistema
function agregarLibro() { 
  console.log("\n ‚ú® Agrega un libro nuevo a la biblioteca ‚ú® \n"); 

  // Se piden los datos del nuevo libro
  let id = parseInt(prompt("üìö Ingresa el ID del libro (4 digitos): "));
  let titulo = prompt("üìò Ingresa el t√≠tulo del libro: ");
  let autor = prompt("‚úçÔ∏è Ingresa el autor: ");
  let anio = parseInt(prompt("üìÖ Ingresa el a√±o de publicaci√≥n: "));
  let genero = prompt("üé≠ Ingresa el g√©nero: ");

  // Se arma el objeto libro con sus propiedades
  let nuevoLibro = {
    id,
    titulo,
    autor,
    anio,
    genero,
    disponible: true
  };

  // Se guarda en el array de libros
  libros.push(nuevoLibro);

  // Se muestra confirmaci√≥n en consola
  console.log("\n‚úÖ Libro agregado con √©xito:");
  mostrarLibroLinea(nuevoLibro);
}

// b) Buscar libro por t√≠tulo, autor o genero
function buscarLibro() { 
  console.log("\n üîç Buscador de libros üîç\n");

  // El usuario elige que criterio buscar
  const criterio = prompt("üîé Buscar por (titulo / autor / g√©nero): ").toLowerCase();
  const valor = prompt(`üí¨ Ingresa el ${criterio} a buscar: `);

  // Se filtran los libros segun el criterio (Se usa funcion quitarAcentos)
  const resultados = libros.filter((libro) => {
    const datoLibro = quitarAcentos(libro[criterio].toLowerCase());
    const valorBuscado = quitarAcentos(valor.toLowerCase());
    return datoLibro === valorBuscado;
  });

  // Mostrar resultados (se usa la funcion mostrarLibroLinea)
  if (resultados.length > 0) {
    console.log("\nüîç Resultados encontrados:\n");
    resultados.forEach((libro, index) => mostrarLibroLinea(libro, index));
  } else {
    console.log("‚ùå No se encontraron libros con ese criterio.");
  }
}

// c) Ordenar libros por t√≠tulo o a√±o (con bubble sort)
function ordenarLibros() {
  console.log("\n‚ú® Ordenar libros ‚ú®\n"); // \n se usa para dejar une espacio entre lineas

  const criterio = prompt("üîÉ Ordenar por (titulo o anio): ").toLowerCase();

  if (criterio !== "titulo" && criterio !== "anio") {
    console.log("‚ùå Criterio inv√°lido.");
    return;
  }

  // Algoritmo de bubble sort 
  for (let i = 0; i < libros.length - 1; i++) {
    for (let j = 0; j < libros.length - i - 1; j++) {
      if (libros[j][criterio] > libros[j + 1][criterio]) {
        // se intercambian los elementos si no est√°n en orden
        let temp = libros[j];
        libros[j] = libros[j + 1];
        libros[j + 1] = temp;
      }
    }
  }

  // Mostrar los libros ordenados
  console.log(`\nüìñ Libros ordenados por ${criterio}:\n`);
  libros.forEach((libro, index) => mostrarLibroLinea(libro, index));
}

// d) Eliminar un libro por su ID
function borrarLibro() {
  console.log("‚ùå Eliminar un libro * ESTA ACCI√ìN NO SE PUEDE DESHACER *\n");

  const id = parseInt(prompt("üóëÔ∏è Ingresa el ID del libro que deseas eliminar: "));
  const index = libros.findIndex((libro) => libro.id === id);

  if (index !== -1) {
    const eliminado = libros.splice(index, 1); // se elimina del array
    console.log("üóëÔ∏è Libro eliminado:");
    mostrarLibroLinea(eliminado[0]);
  } else {
    console.log("‚ùå No se encontr√≥ un libro con ese ID.");
  }
}

// ---------------------------------------------
// SUBMEN√ö: Gesti√≥n de Libros
// ---------------------------------------------

function menuLibros() {
  let opcion;

  do {
    // Men√∫ interactivo que se repite hasta que el usuario quiera salir
    opcion = prompt(
      "\nGESTI√ìN DE LIBROS\n" +
      "üìö üìö üìö üìö üìö üìö üìö üìö üìö üìö üìö\n\n" +
      "Selecciona una opci√≥n para continuar:\n\n" +
      "   1 ‚Æï Agregar libro üìö \n" +
      "   2 ‚Æï Buscar libro üîç \n" +
      "   3 ‚Æï Ordenar libros ‚ú®\n" +
      "   4 ‚Æï Borrar libro üóëÔ∏è \n" +
      "   5 ‚Æï Mostrar todos los libros üìñ \n" +
      "   0 ‚Æï Regresar al men√∫ principal ‚Ü©Ô∏è \n\n"
    );

    // Se ejecuta la funci√≥n correspondiente
    switch (opcion) {
      case "1":
        agregarLibro();
        break;
      case "2":
        buscarLibro();
        break;
      case "3":
        ordenarLibros();
        break;
      case "4":
        borrarLibro();
        break;
      case "5":
        mostrarLibros();
        break;
      case "0":
        console.log("‚Ü©Ô∏è Regresando al men√∫ principal..\n\n"); // Regresa al men'u principal 
        break;
      default:
        console.log("‚ùå Opci√≥n no v√°lida.");
    }
  } while (opcion !== "0"); // al seleccionar "0", se corta el ciclo y sale del submen√∫
}

//function menuLibros() 


// ---------------------------------------------
// PUNTO 3: GESTI√ìN DE USUARIOS
// ---------------------------------------------

// a) Registrar usuario

function registrarUsuario() {
  console.log("\nüÜï Registro de nuevo usuario\n");

  // Pedimos los datos b√°sicos al usuario
  const nombre = prompt("üë§ Ingresa el nombre: ");
  const email = prompt("üìß Ingresa el email: ");

  // Creamos el ID autom√°ticamente (suma 1 al √∫ltimo ID a partir del 2001)
  const id = usuarios.length > 0 ? usuarios[usuarios.length - 1].id + 1 : 2001;

  // Creamos el objeto usuario
  const nuevoUsuario = {
    id,
    nombre: nombre.trim(),
    email: email.toLowerCase(),
    librosPrestados: [] // el usuario arranca sin libros prestados
  };

  // Agregamos al array de usuarios
  usuarios.push(nuevoUsuario);

  console.log("‚úÖ Usuario registrado con √©xito:");
  console.log(nuevoUsuario);
}

// b) Mostrar todos los usuarios registrados
function mostrarTodosLosUsuarios() {
  console.log("\nüë• Lista de usuarios:\n");

  // Recorremos el array y mostramos cada uno con su ID y email
  usuarios.forEach((usuario, index) => {
    console.log(`üë§ [ID: ${usuario.id}] ${usuario.nombre} - ${usuario.email}`);
  });
}

// c) Buscar usuario por email
function buscarUsuario() {
  console.log("\nüîç Buscar usuario por email\n");

  const email = prompt("üìß Ingresa el email del usuario: ").toLowerCase();

  // Buscamos el usuario en el array usando .find()
  const usuarioEncontrado = usuarios.find((usuario) => usuario.email === email);

  if (usuarioEncontrado) {
    console.log("‚úÖ Usuario encontrado:");
    console.log(usuarioEncontrado);
  } else {
    console.log("‚ùå No se encontr√≥ ning√∫n usuario con ese email.");
  }
}

// d) Borrar usuario por email
function borrarUsuario() {
  console.log("\nüóëÔ∏è Eliminar usuario\n");

  const email = prompt("üìß Ingresa el email del usuario a eliminar: ").toLowerCase();

  // Buscamos el √≠ndice del usuario en el array
  const index = usuarios.findIndex((usuario) => usuario.email === email);

  if (index !== -1) {
    // se elimina si se encuentra
    const eliminado = usuarios.splice(index, 1);
    console.log("üóëÔ∏è Usuario eliminado con √©xito:");
    console.log(eliminado[0]);
  } else {
    console.log("‚ùå No se encontr√≥ un usuario con ese email.");
  }
}

// ---------------------------------------------
// SUBMEN√ö: Gesti√≥n de Usuarios
// ---------------------------------------------
function menuUsuarios() {
  let opcion;

  do {
    // Mostramos el men√∫ de opciones para usuarios
    opcion = prompt(
      "\nGESTI√ìN DE USUARIOS\n" +
      "üë• üë• üë• üë• üë• üë• üë• üë• üë• üë• üë•\n\n" +
      "Selecciona una opci√≥n:\n\n" +
      "   1 ‚Æï Registrar usuario üë§ \n" +
      "   2 ‚Æï Buscar usuario por email üîç \n" +
      "   3 ‚Æï Borrar usuario üóëÔ∏è\n" +
      "   4 ‚Æï Mostrar todos los usuarios üìã\n" +
      "   0 ‚Æï Regresar al men√∫ principal ‚Ü©Ô∏è \n\n"
    );

    // Segun lo que elija el usuario, se ejecuta la funci√≥n correspondiente
    switch (opcion) {
      case "1":
        registrarUsuario();
        break;
      case "2":
        buscarUsuario();
        break;
      case "3":
        borrarUsuario();
        break;
      case "4":
        mostrarTodosLosUsuarios();
        break;
      case "0":
        console.log("‚Ü©Ô∏è Regresando al men√∫ principal...\n");
        break;
      default:
        console.log("‚ùå Opci√≥n no v√°lida.");
    }
  } while (opcion !== "0");
}

// menuUsuarios();


// ---------------------------------------------
// PUNTO 4: GESTI√ìN DE PR√âSTAMOS
// ---------------------------------------------

// a) Prestar libro a un usuario
function prestarLibro() {
  console.log("\nüìñ Pr√©stamo de libro\n");

  // Pedimos los IDs del usuario y del libro
  const idUsuario = parseInt(prompt("üÜî Ingresa el ID del usuario: "));
  const idLibro = parseInt(prompt("üìö Ingresa el ID del libro: "));

  // Buscamos el usuario y el libro 
  const usuario = usuarios.find((u) => u.id === idUsuario);
  const libro = libros.find((l) => l.id === idLibro);

  // Validamos si el usuario existe
  if (!usuario) {
    console.log("‚ùå Usuario no encontrado.");
    return;
  }

  // Validamos si el libro existe
  if (!libro) {
    console.log("‚ùå Libro no encontrado.");
    return;
  }

  // Verificamos si el libro ya est√° prestado
  if (!libro.disponible) {
    console.log("‚ùå El libro ya est√° prestado.");
    return;
  }

  // Registramos el pr√©stamo
  libro.disponible = false;
  usuario.librosPrestados.push(libro.id); // Guardamos el ID del libro en la lista de pr√©stamos del usuario

  // Confirmaci√≥n en consola
  console.log(`‚úÖ El libro "${libro.titulo.toUpperCase()}" fue prestado a ${usuario.nombre}.`);
}

// b) Devolver un libro prestado
function devolverLibro() {
  console.log("\nüì• Devoluci√≥n de libro\n");

  // se pide el ID del usuario y del libro
  const idUsuario = parseInt(prompt("üÜî Ingresa el ID del usuario: "));
  const idLibro = parseInt(prompt("üìö Ingresa el ID del libro: "));

  // se busca al usuario y al libro
  const usuario = usuarios.find((u) => u.id === idUsuario);
  const libro = libros.find((l) => l.id === idLibro);

  // se valida que el usuario exista
  if (!usuario) {
    console.log("‚ùå Usuario no encontrado.");
    return;
  }

  // se valida que el libro exista
  if (!libro) {
    console.log("‚ùå Libro no encontrado.");
    return;
  }

  // se verifica si el usuario ten√≠a ese libro prestado
  const index = usuario.librosPrestados.indexOf(libro.id);

  if (index === -1) {
    console.log("‚ùå Este usuario no tiene prestado ese libro.");
    return;
  }

  // Registro de devoluci√≥n
  libro.disponible = true;
  usuario.librosPrestados.splice(index, 1); // Quitamos el libro de su lista

  console.log(`‚úÖ El libro "${libro.titulo}" fue devuelto por ${usuario.nombre}.`);
}

// ---------------------------------------------
// PUNTO 5: GESTI√ìN DE PR√âSTAMOS - REPORTE
// ---------------------------------------------

function generarReporteLibros() {
  console.log("\nüìä Reporte de Libros üìö\n");

  // Total de libros registrados
  const totalLibros = libros.length;

  // Total de libros que ya fueron prestados
  const prestados = libros.filter((libro) => !libro.disponible).length;

  // Cantidad de libros por g√©nero 
  const librosPorGenero = libros.reduce((conteo, libro) => {
    const genero = libro.genero.toLowerCase(); // se pasa a minusculas
    conteo[genero] = (conteo[genero] || 0) + 1; // si ya existe el g√©nero, suma 1. Si no, lo crea con valor 1.
    return conteo;
  }, {});

  // Libro m√°s antiguo 
  const libroMasAntiguo = libros.reduce((antiguo, actual) =>
    actual.anio < antiguo.anio ? actual : antiguo
  );

  // Libro m√°s nuevo 
  const libroMasNuevo = libros.reduce((nuevo, actual) =>
    actual.anio > nuevo.anio ? actual : nuevo
  );

  // Mostramos todo el resumen 
  console.log(`üìö Total de libros: ${totalLibros}`);
  console.log(`‚ùå Libros prestados: ${prestados}`);
  console.log(`üìñ Libros por g√©nero:`);

  for (const genero in librosPorGenero) {
    console.log(`   - ${genero}: ${librosPorGenero[genero]}`);
  }

  console.log(`üìú Libro m√°s antiguo: "${libroMasAntiguo.titulo}" (${libroMasAntiguo.anio})`);
  console.log(`üÜï Libro m√°s nuevo: "${libroMasNuevo.titulo}" (${libroMasNuevo.anio})`);
}

// ---------------------------------------------
// SUBMEN√ö: Gesti√≥n de Pr√©stamos
// ---------------------------------------------

function menuPrestamos() {
  let opcion;

  do {
    // Men√∫ con opciones relacionadas a pr√©stamos y reportes
    opcion = prompt(
      "\nGESTI√ìN DE PR√âSTAMOS\n" +
      "üì• üìñ üì• üìñ üì• üìñ üì• üìñ üì• üìñ\n\n" +
      "Selecciona una opci√≥n:\n\n" +
      "   1 ‚Æï Prestar libro üìö \n" +
      "   2 ‚Æï Devolver libro üì• \n" +
      "   3 ‚Æï Generar reporte üìä\n\n" +
      "   0 ‚Æï Regresar al menu principal ‚Ü©Ô∏è \n\n"
    );

    switch (opcion) {
      case "1":
        prestarLibro();
        break;
      case "2":
        devolverLibro();
        break;
      case "3":
        generarReporteLibros();
        break;
      case "0":
        console.log("‚Ü©Ô∏è Regresando al men√∫ principal...\n");
        break;
      default:
        console.log("‚ùå Opci√≥n no v√°lida.");
    }
  } while (opcion !== "0"); 
}

// menuPrestamos()

// ---------------------------------------------
// PUNTO 6: BUSCADOR AVANZADO DE LIBROS
// ---------------------------------------------

function buscadorAvanzado() {
  console.log("\nüîé B√∫squeda avanzada de libros üîç\n");

  // Pedimos al usuario que elija el tipo de b√∫squeda
  const criterio = prompt("Buscar por (titulo / autor / genero / anio): ").toLowerCase();

  let resultados = []; // 

  // Si el usuario elige buscar por texto (t√≠tulo, autor o g√©nero)
  if (criterio === "titulo" || criterio === "autor" || criterio === "genero") {
    const valor = prompt(`Ingresa el ${criterio} a buscar: `).toLowerCase();

    // Usamos .filter() para buscar libros que contengan lo que el usuario escribi√≥
    // Tambi√©n usamos quitarAcentos para evitar errores por tildes
    resultados = libros.filter((libro) =>
      quitarAcentos(libro[criterio].toLowerCase()).includes(quitarAcentos(valor))
    );

  // Si el usuario quiere buscar por rango de a√±os
  } else if (criterio === "anio") {
    const desde = parseInt(prompt("Anio desde: "));
    const hasta = parseInt(prompt("Anio hasta: "));

    // Filtramos los libros que est√©n dentro del rango de a√±os ingresado
    resultados = libros.filter((libro) => libro.anio >= desde && libro.anio <= hasta);

  } else {
    console.log("‚ùå Criterio no v√°lido.");
    return;
  }

  if (resultados.length > 0) {
    console.log("\nüìö Resultados encontrados:\n");
    resultados.forEach((libro, index) => {
      mostrarLibroLinea(libro, index); 
    });
  } else {
    console.log("‚ùå No se encontraron libros con ese criterio.");
  }
}

// buscadorAvanzado()

// ---------------------------------------------
// PUNTO 7: ESTAD√çSTICAS
// ---------------------------------------------

function calcularEstadisticas() {
  console.log("\nüìä C√°lculos Estad√≠sticos de los Libros\n");

  if (libros.length === 0) {
    console.log("‚ùå No hay libros en la biblioteca para calcular estad√≠sticas.");
    return;
  }

  // Promedio de a√±os de publicaci√≥n
  const sumaAnios = libros.reduce((acc, libro) => acc + libro.anio, 0);
  const promedio = sumaAnios / libros.length;

  // A√±o de publicaci√≥n m√°s frecuente
  const frecuencia = {};
  libros.forEach((libro) => {
    frecuencia[libro.anio] = (frecuencia[libro.anio] || 0) + 1;
  });

  // el a√±o que m√°s veces aparece
  const a√±oMasFrecuente = Object.keys(frecuencia).reduce((a, b) =>
    frecuencia[a] > frecuencia[b] ? a : b
  );

  // Diferencia entre el libro m√°s antiguo y el m√°s nuevo
  const anios = libros.map((libro) => libro.anio);
  const anioMin = Math.min(...anios);
  const anioMax = Math.max(...anios);
  const diferencia = anioMax - anioMin;

  console.log(`üìö Promedio de a√±os de publicaci√≥n: ${promedio.toFixed(2)}`);
  console.log(`üìÜ A√±o de publicaci√≥n m√°s frecuente: ${a√±oMasFrecuente}`);
  console.log(`üìè Diferencia entre el libro m√°s antiguo y el m√°s nuevo: ${diferencia} a√±os`);
}

// ---------------------------------------------
// PUNTO 9: INTERFAZ DE USUARIO POR CONSOLA
// ---------------------------------------------

// muestra el menu principal en la terminal para que el usuario pueda interactuar con el programa. 
// usamos un do... while para que el men√∫ se muestre al menos una vez y se siga mostrando hasta que el usuario decida salir 
// usamos switch para ejecutar la funci√≥n correspondiente seg√∫n la opci√≥n seleccionada por el usuario

function menuPrincipal() {
  let opcion;
  do {
    opcion = prompt(
      "\nBIENVENIDO AL SISTEMA DE GESTI√ìN DE BIBLIOTECA üìöüìã\n\n" +
      "Selecciona una opci√≥n:\n\n" +
      "   1 ‚Æï Gesti√≥n de Libros üìò \n" +
      "   2 ‚Æï Gesti√≥n de Usuarios üë•\n" +
      "   3 ‚Æï Gesti√≥n de Pr√©stamos üìñ\n" +
      "   4 ‚Æï B√∫squeda avanzada üîç\n" +
      "   5 ‚Æï Estad√≠sticas üìä \n" +      
      "   0 ‚Æï Salir del programa ‚ùå \n\n"
    );

    switch (opcion) {
      case "1":
        menuLibros(); // abre el submen√∫ para gestionar libros
        break;
      case "2":
        menuUsuarios(); // abre el submen√∫ para gestionar usuarios
        break;
      case "3":
        menuPrestamos(); // abre el submen√∫ de pr√©stamos y reportes
        break;
      case "4":
        buscadorAvanzado(); // lanza el buscador avanzado por criterios
        break;
      case "5":
        calcularEstadisticas(); // muestra estad√≠sticas de los libros
        break;     
      case "0":
        console.log("\nüëã Gracias por visitar la biblioteca. ¬°Hasta pronto!\n"); // despedida al salir
        break;
      default:
        console.log("‚ùå Opci√≥n no v√°lida."); 
    }
  } while (opcion !== "0"); // el men√∫ sigue apareciendo hasta que el usuario escriba "0", al hacerlo, se finaliza el programa. 
}

menuPrincipal(); // Llamamos a la funci√≥n para iniciar el programa 

// FIN DEL PROGRAMA
